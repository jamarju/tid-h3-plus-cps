<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tidradio H3 Plus - Web CPS</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header class="header">
        <div class="header-left">
            <h1>Tidradio H3 Plus CPS</h1>
            <span class="firmware-note" title="This software has been tested with H3 Plus firmware v1.0.45">Tested: FW v1.0.45</span>
            <span class="connection-status" id="connectionStatus">Disconnected</span>
        </div>
        <div class="header-actions">
            <button id="btnConnect" class="btn btn-primary">Connect</button>
            <button id="btnRead" class="btn" disabled>Read</button>
            <div class="btn-split">
                <button id="btnWrite" class="btn btn-split-main" disabled>Write</button>
                <button id="btnWriteDropdown" class="btn btn-split-arrow" disabled>▾</button>
                <div class="btn-split-menu" id="writeMenu">
                    <button data-mode="all">Write All</button>
                    <button data-mode="settings">Settings Only</button>
                    <button data-mode="channels">Channels Only</button>
                    <button data-mode="fm">FM Radio Only</button>
                </div>
            </div>
            <div class="separator"></div>
            <button id="btnLoad" class="btn">Load File</button>
            <button id="btnSave" class="btn" disabled>Save File</button>
        </div>
    </header>

    <nav class="tabs">
        <button class="tab active" data-tab="settings">Settings</button>
        <button class="tab" data-tab="channels">Channels</button>
        <button class="tab" data-tab="fmchannels">FM Channels</button>
        <button class="tab hidden" data-tab="debug">Debug</button>
    </nav>

    <main class="main-content">
        <section id="channelsPanel" class="panel">
            <div class="grid-toolbar">
                <span class="grid-info">199 Channels | Arrow keys to navigate | Enter to edit | Ctrl+C/V copy/paste | Ctrl+1/2/3 switch tabs, Ctrl+4 enable debug</span>
            </div>
            <div class="grid-container disabled" id="gridContainer">
                <div class="panel-disabled-message" id="gridDisabledMessage">Read from radio or load a file to edit channels</div>
                <table class="channel-grid" id="channelGrid">
                    <thead>
                        <tr>
                            <th class="col-ch" data-tip="Channel number (1-199)">CH</th>
                            <th class="col-rxfreq" data-tip="Receive frequency in MHz - the frequency you listen on">RX Freq</th>
                            <th class="col-txfreq" data-tip="Transmit frequency in MHz - the frequency you transmit on (same as RX for simplex)">TX Freq</th>
                            <th class="col-hop" data-tip="Frequency Hopping - enables spread spectrum hopping (both radios must match)">Hop</th>
                            <th class="col-decode" data-tip="RX CTCSS/DCS tone - only opens squelch when this tone is received (privacy code)">Decode(RX)</th>
                            <th class="col-encode" data-tip="TX CTCSS/DCS tone - transmits this tone so others with matching Decode can hear you">Encode(TX)</th>
                            <th class="col-power" data-tip="Transmit power: LOW (~1W) for short range/battery saving, HIGH (~5W) for longer range">Power</th>
                            <th class="col-bw" data-tip="Bandwidth: N=Narrow (12.5kHz) for digital/PMR446, W=Wide (25kHz) for analog amateur">BW</th>
                            <th class="col-busy" data-tip="Busy Channel Lockout - prevents transmitting when channel is in use">Busy</th>
                            <th class="col-pttid" data-tip="PTT ID - sends DTMF identification when you press/release PTT">PTT ID</th>
                            <th class="col-scan" data-tip="Include this channel in scan list when scanning">Scan</th>
                            <th class="col-name" data-tip="Channel name (up to 8 characters) displayed on radio screen">Name</th>
                            <th class="col-scramble" data-tip="Voice scrambling - both radios must have same setting to communicate">Scram</th>
                        </tr>
                    </thead>
                    <tbody id="channelBody">
                    </tbody>
                </table>
            </div>
        </section>

        <section id="settingsPanel" class="panel active">
            <div class="settings-container disabled" id="settingsContainer">
                <div class="panel-disabled-message" id="settingsDisabledMessage">Read from radio or load a file to edit settings</div>
                <div class="settings-group">
                    <h3>Display</h3>
                    <div class="setting-row">
                        <label for="display" title="Screen layout: Single shows one channel, Dual shows A+B channels side by side, Classic is legacy style"><span class="setting-index">15</span> Display</label>
                        <select id="display">
                            <option value="0">Single</option>
                            <option value="1">Dual</option>
                            <option value="2">Classic</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="lightControl" title="How long the backlight stays on after pressing a key. Always On uses more battery."><span class="setting-index">12</span> Backlight</label>
                        <select id="lightControl">
                            <option value="0">Always On</option>
                            <option value="1">5S</option>
                            <option value="2">10S</option>
                            <option value="3">15S</option>
                            <option value="4">30S</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="brightness" title="Display brightness level. Higher values use more battery."><span class="setting-index">13</span> Brightness</label>
                        <select id="brightness">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="aChannelDisp" title="What to show for VFO-A: frequency with channel number, or channel name with number"><span class="setting-index">17</span> Display Type-A</label>
                        <select id="aChannelDisp">
                            <option value="0">Freq + Number</option>
                            <option value="1">Name + Number</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="bChannelDisp" title="What to show for VFO-B: frequency with channel number, or channel name with number"><span class="setting-index">18</span> Display Type-B</label>
                        <select id="bChannelDisp">
                            <option value="0">Freq + Number</option>
                            <option value="1">Name + Number</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="menuColor" title="Color theme for the menu interface and highlights"><span class="setting-index">42</span> Menu Color</label>
                        <select id="menuColor">
                            <option value="0">Blue</option>
                            <option value="1">Red</option>
                            <option value="2">Green</option>
                            <option value="3">Yellow</option>
                            <option value="4">Purple</option>
                            <option value="5">Orange</option>
                            <option value="6">Light Blue</option>
                            <option value="7">Cyan</option>
                            <option value="8">Gray</option>
                            <option value="9">Dark Blue</option>
                            <option value="10">Light Green</option>
                            <option value="11">Brown</option>
                            <option value="12">Pink</option>
                            <option value="13">B.Red</option>
                            <option value="14">G.Blue</option>
                            <option value="15">L.Gray</option>
                            <option value="16">LG.Blue</option>
                            <option value="17">LB.Blue</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Audio</h3>
                    <div class="setting-row">
                        <label for="squelchLevel" title="Minimum signal strength to open the speaker. Higher level = stronger signal required to hear audio. Use higher levels in noisy environments to reduce static."><span class="setting-index">01</span> Squelch Level</label>
                        <select id="squelchLevel">
                            <option value="0">OFF</option>
                            <option value="1">Level 1</option>
                            <option value="2">Level 2</option>
                            <option value="3">Level 3</option>
                            <option value="4">Level 4</option>
                            <option value="5">Level 5</option>
                            <option value="6">Level 6</option>
                            <option value="7">Level 7</option>
                            <option value="8">Level 8</option>
                            <option value="9">Level 9</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="voicePrompt" title="Enable spoken voice prompts for menu navigation and channel announcements"><span class="setting-index">11</span> Voice</label>
                        <input type="checkbox" id="voicePrompt">
                    </div>
                    <div class="setting-row">
                        <label for="language" title="Language for voice prompts and menu text"><span class="setting-index">21</span> Language</label>
                        <select id="language">
                            <option value="0">English</option>
                            <option value="1">Chinese</option>
                            <option value="2">Turkish</option>
                            <option value="3">Russian</option>
                            <option value="4">German</option>
                            <option value="5">Spanish</option>
                            <option value="6">Italian</option>
                            <option value="7">French</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="beep" title="Play a beep sound when pressing keypad buttons"><span class="setting-index">07</span> Keypad Beep</label>
                        <input type="checkbox" id="beep">
                    </div>
                    <div class="setting-row">
                        <label for="roger" title="Beep tone transmitted at end of your transmission to signal you're done talking"><span class="setting-index">06</span> Roger Beep</label>
                        <select id="roger">
                            <option value="0">OFF</option>
                            <option value="1">TONE1</option>
                            <option value="2">TONE2</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="micGain" title="Microphone sensitivity. Increase if others say you're too quiet, decrease if you're distorted."><span class="setting-index">33</span> MIC Gain</label>
                        <select id="micGain">
                            <option value="0">00</option>
                            <option value="1">01</option>
                            <option value="2">02</option>
                            <option value="3">03</option>
                            <option value="4">04</option>
                            <option value="5">05</option>
                            <option value="6">06</option>
                            <option value="7">07</option>
                            <option value="8">08</option>
                            <option value="9">09</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Signal</h3>
                    <div class="setting-row">
                        <label for="ste" title="Squelch Tail Elimination - reduces the 'kerchunk' noise burst at the end of received transmissions"><span class="setting-index">23</span> STE</label>
                        <input type="checkbox" id="ste">
                    </div>
                    <div class="setting-row">
                        <label for="rpSte" title="Repeater Squelch Tail Elimination delay in seconds. Reduces squelch tail noise on repeater use.">STE Delay</label>
                        <select id="rpSte">
                            <option value="0">Off</option>
                            <option value="1">1s</option>
                            <option value="2">2s</option>
                            <option value="3">3s</option>
                            <option value="4">4s</option>
                            <option value="5">5s</option>
                            <option value="6">6s</option>
                            <option value="7">7s</option>
                            <option value="8">8s</option>
                            <option value="9">9s</option>
                            <option value="10">10s</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="rpToneDelay" title="Repeater tone delay in seconds. Delays transmission of repeater tone.">Repeater Tone Delay</label>
                        <select id="rpToneDelay">
                            <option value="0">Off</option>
                            <option value="1">1s</option>
                            <option value="2">2s</option>
                            <option value="3">3s</option>
                            <option value="4">4s</option>
                            <option value="5">5s</option>
                            <option value="6">6s</option>
                            <option value="7">7s</option>
                            <option value="8">8s</option>
                            <option value="9">9s</option>
                            <option value="10">10s</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="toneBurst" title="Selects tone frequency (1000Hz/1450Hz/1750Hz/2100Hz). To transmit this tone, assign PF1 or PF2 button to 'Tone' function."><span class="setting-index">24</span> Tone Burst</label>
                        <select id="toneBurst">
                            <option value="0">1000Hz</option>
                            <option value="1">1450Hz</option>
                            <option value="2">1750Hz</option>
                            <option value="3">2100Hz</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="talkAround" title="Bypass repeater TX/RX offset to communicate directly on the RX frequency (simplex)"><span class="setting-index">25</span> Talk Around</label>
                        <input type="checkbox" id="talkAround">
                    </div>
                    <div class="setting-row">
                        <label for="fmInterrupt" title="When OFF, incoming calls can interrupt FM radio mode. When ON, FM radio plays uninterrupted."><span class="setting-index">26</span> FM Interrupt</label>
                        <input type="checkbox" id="fmInterrupt">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>TX Settings</h3>
                    <div class="setting-row">
                        <label for="stepFreq" title="Frequency step size when tuning with the dial in VFO mode. 12.5K is standard for most radios."><span class="setting-index">02</span> Step Freq</label>
                        <select id="stepFreq">
                            <option value="0">2.5K</option>
                            <option value="1">5.0K</option>
                            <option value="2">6.25K</option>
                            <option value="3">10K</option>
                            <option value="4">12.5K</option>
                            <option value="5">25K</option>
                            <option value="6">50K</option>
                            <option value="7">0.5K</option>
                            <option value="8">8.33K</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="tot" title="Transmit Over Time - automatically stops transmission after this time limit to prevent accidental long transmissions"><span class="setting-index">05</span> TOT</label>
                        <select id="tot">
                            <option value="0">OFF</option>
                            <option value="1">30S</option>
                            <option value="2">60S</option>
                            <option value="3">90S</option>
                            <option value="4">120S</option>
                            <option value="5">150S</option>
                            <option value="6">180S</option>
                            <option value="7">210S</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="pttDelay" title="Delay before audio is transmitted after pressing PTT (100-1000ms). Function unclear - may affect repeater timing."><span class="setting-index">20</span> PTT Delay</label>
                        <select id="pttDelay">
                            <option value="0">100ms</option>
                            <option value="1">200ms</option>
                            <option value="2">300ms</option>
                            <option value="3">400ms</option>
                            <option value="4">500ms</option>
                            <option value="5">600ms</option>
                            <option value="6">700ms</option>
                            <option value="7">800ms</option>
                            <option value="8">900ms</option>
                            <option value="9">1000ms</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="modulation" title="Modulation type: FM for most amateur/PMR use, AM for airband receive"><span class="setting-index">38</span> Modulation</label>
                        <select id="modulation">
                            <option value="0">FM</option>
                            <option value="1">AM</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="tx200" title="Enable transmit in 200MHz band (220-225MHz amateur band). Check your license!"><span class="setting-index">39</span> 200Tx</label>
                        <input type="checkbox" id="tx200">
                    </div>
                    <div class="setting-row">
                        <label for="tx350" title="Enable transmit in 350MHz band. Check local regulations!"><span class="setting-index">40</span> 350Tx</label>
                        <input type="checkbox" id="tx350">
                    </div>
                    <div class="setting-row">
                        <label for="tx500" title="Enable transmit in 500MHz band. Check local regulations!"><span class="setting-index">41</span> 500Tx</label>
                        <input type="checkbox" id="tx500">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>VOX</h3>
                    <div class="setting-row">
                        <label for="voxGain" title="Voice-activated transmit sensitivity. Higher level = more sensitive microphone (triggers on quieter sounds). Useful for hands-free operation."><span class="setting-index">03</span> VOX Level</label>
                        <select id="voxGain">
                            <option value="0">OFF</option>
                            <option value="1">Level 1</option>
                            <option value="2">Level 2</option>
                            <option value="3">Level 3</option>
                            <option value="4">Level 4</option>
                            <option value="5">Level 5</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="voxDelay" title="How long the radio keeps transmitting after you stop talking (VOX hang time)"><span class="setting-index">04</span> VOX Delay</label>
                        <select id="voxDelay">
                            <option value="0">1.0S</option>
                            <option value="1">2.0S</option>
                            <option value="2">3.0S</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Scan</h3>
                    <div class="setting-row">
                        <label for="tdr" title="Monitor both VFO-A and VFO-B channels, alternating between them to catch activity on either"><span class="setting-index">10</span> Dual Watch</label>
                        <input type="checkbox" id="tdr">
                    </div>
                    <div class="setting-row">
                        <label for="scanMode" title="Scan resume mode: TO=time-operated (waits fixed time), CO=carrier-operated (waits until signal drops), SE=search (stops on signal)">Scan Mode</label>
                        <select id="scanMode">
                            <option value="0">TO (Time Operated)</option>
                            <option value="1">CO (Carrier Operated)</option>
                            <option value="2">SE (Search)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="scanHangTime" title="How long to stay on a channel after detecting activity before resuming scan (0.5s to 10.0s)">Scan Hang Time</label>
                        <select id="scanHangTime">
                            <option value="0">0.5s</option>
                            <option value="1">1.0s</option>
                            <option value="2">1.5s</option>
                            <option value="3">2.0s</option>
                            <option value="4">2.5s</option>
                            <option value="5">3.0s</option>
                            <option value="6">3.5s</option>
                            <option value="7">4.0s</option>
                            <option value="8">4.5s</option>
                            <option value="9">5.0s</option>
                            <option value="10">5.5s</option>
                            <option value="11">6.0s</option>
                            <option value="12">6.5s</option>
                            <option value="13">7.0s</option>
                            <option value="14">7.5s</option>
                            <option value="15">8.0s</option>
                            <option value="16">8.5s</option>
                            <option value="17">9.0s</option>
                            <option value="18">9.5s</option>
                            <option value="19">10.0s</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="scanFreqLower" title="Lower frequency limit for scan range in MHz (0-255 MHz)">Scan Freq Lower (MHz)</label>
                        <input type="number" id="scanFreqLower" min="0" max="255" class="text-input" placeholder="66">
                    </div>
                    <div class="setting-row">
                        <label for="scanFreqUpper" title="Upper frequency limit for scan range in MHz (0-599 MHz)">Scan Freq Upper (MHz)</label>
                        <input type="number" id="scanFreqUpper" min="0" max="599" class="text-input" placeholder="599">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>VFO Selection</h3>
                    <div class="setting-row">
                        <label for="activeVfo" title="Which VFO (A or B) is currently active">Active VFO</label>
                        <select id="activeVfo">
                            <option value="0">A</option>
                            <option value="1">B</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>VFO A</h3>
                    <div class="setting-row">
                        <label for="vfoARxFreq" title="VFO A receive frequency in MHz">RX Frequency</label>
                        <input type="text" id="vfoARxFreq" class="text-input" placeholder="446.00625">
                    </div>
                    <div class="setting-row">
                        <label for="vfoAOffset" title="Repeater offset frequency in MHz">Offset (MHz)</label>
                        <input type="text" id="vfoAOffset" class="text-input" placeholder="0.600">
                    </div>
                    <div class="setting-row">
                        <label for="vfoAOffsetDir" title="Offset direction: Off (simplex), + (TX higher), - (TX lower)">Offset Direction</label>
                        <select id="vfoAOffsetDir">
                            <option value="OFF">Off</option>
                            <option value="+">+ (TX Higher)</option>
                            <option value="-">- (TX Lower)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoARxTone" title="CTCSS/DCS tone for receive (decode)">RX Subtone</label>
                        <select id="vfoARxTone" class="tone-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoATxTone" title="CTCSS/DCS tone for transmit (encode)">TX Subtone</label>
                        <select id="vfoATxTone" class="tone-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoABandwidth" title="Channel bandwidth: Wide (25kHz) or Narrow (12.5kHz)">Bandwidth</label>
                        <select id="vfoABandwidth">
                            <option value="W">Wide (25kHz)</option>
                            <option value="N">Narrow (12.5kHz)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoATxPower" title="Transmit power level">TX Power</label>
                        <select id="vfoATxPower">
                            <option value="LOW">Low</option>
                            <option value="HIGH">High</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoAScramble" title="Voice scrambler level (0=off, 1-16=level)">Scramble</label>
                        <select id="vfoAScramble">
                            <option value="0">OFF</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoABusyLock" title="Block transmit when channel is busy">Busy Lock</label>
                        <input type="checkbox" id="vfoABusyLock">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>VFO B</h3>
                    <div class="setting-row">
                        <label for="vfoBRxFreq" title="VFO B receive frequency in MHz">RX Frequency</label>
                        <input type="text" id="vfoBRxFreq" class="text-input" placeholder="446.09375">
                    </div>
                    <div class="setting-row">
                        <label for="vfoBOffset" title="Repeater offset frequency in MHz">Offset (MHz)</label>
                        <input type="text" id="vfoBOffset" class="text-input" placeholder="0.600">
                    </div>
                    <div class="setting-row">
                        <label for="vfoBOffsetDir" title="Offset direction: Off (simplex), + (TX higher), - (TX lower)">Offset Direction</label>
                        <select id="vfoBOffsetDir">
                            <option value="OFF">Off</option>
                            <option value="+">+ (TX Higher)</option>
                            <option value="-">- (TX Lower)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBRxTone" title="CTCSS/DCS tone for receive (decode)">RX Subtone</label>
                        <select id="vfoBRxTone" class="tone-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBTxTone" title="CTCSS/DCS tone for transmit (encode)">TX Subtone</label>
                        <select id="vfoBTxTone" class="tone-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBBandwidth" title="Channel bandwidth: Wide (25kHz) or Narrow (12.5kHz)">Bandwidth</label>
                        <select id="vfoBBandwidth">
                            <option value="W">Wide (25kHz)</option>
                            <option value="N">Narrow (12.5kHz)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBTxPower" title="Transmit power level">TX Power</label>
                        <select id="vfoBTxPower">
                            <option value="LOW">Low</option>
                            <option value="HIGH">High</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBScramble" title="Voice scrambler level (0=off, 1-16=level)">Scramble</label>
                        <select id="vfoBScramble">
                            <option value="0">OFF</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="vfoBBusyLock" title="Block transmit when channel is busy">Busy Lock</label>
                        <input type="checkbox" id="vfoBBusyLock">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Power Save</h3>
                    <div class="setting-row">
                        <label for="save" title="Battery saver duty cycle. Radio sleeps between receive checks. Higher level = longer sleep cycles (more battery savings but may miss the start of incoming audio)."><span class="setting-index">08</span> Power Save</label>
                        <select id="save">
                            <option value="0">OFF</option>
                            <option value="1">Level 1 (1:1)</option>
                            <option value="2">Level 2 (1:2)</option>
                            <option value="3">Level 3 (1:3)</option>
                            <option value="4">Level 4 (1:4)</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="autoLock" title="Automatically lock the keypad to prevent accidental button presses"><span class="setting-index">09</span> Keypad Lock</label>
                        <input type="checkbox" id="autoLock">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Function Keys</h3>
                    <div class="setting-row">
                        <label for="shortKeyPf1" title="Function assigned to short press of PF1 side button"><span class="setting-index">27</span> PF1 Short</label>
                        <select id="shortKeyPf1" class="key-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="longKeyPf1" title="Function assigned to long press of PF1 side button"><span class="setting-index">28</span> PF1 Long</label>
                        <select id="longKeyPf1" class="key-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="shortKeyPf2" title="Function assigned to short press of PF2 side button"><span class="setting-index">29</span> PF2 Short</label>
                        <select id="shortKeyPf2" class="key-select"></select>
                    </div>
                    <div class="setting-row">
                        <label for="longKeyPf2" title="Function assigned to long press of PF2 side button"><span class="setting-index">30</span> PF2 Long</label>
                        <select id="longKeyPf2" class="key-select"></select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Alarm</h3>
                    <div class="setting-row">
                        <label for="alarmMode" title="On Site: flashlight flashes quickly as local alarm. TX Alarm: transmits alarm signal for 10s, pauses 2s, repeats."><span class="setting-index">22</span> Alarm Mode</label>
                        <select id="alarmMode">
                            <option value="0">On Site</option>
                            <option value="2">TX Alarm</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>DTMF</h3>
                    <div class="setting-row">
                        <label for="aniEdit" title="Automatic Number Identification - your radio's 3-digit ID code sent with PTT ID"><span class="setting-index">16</span> ANI-Edit</label>
                        <input type="text" id="aniEdit" maxlength="3" class="text-input" pattern="[0-9]{3}" placeholder="000">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfSideTone" title="Hear DTMF tones in the speaker when sending them"><span class="setting-index">19</span> DTMF Side Tone</label>
                        <input type="checkbox" id="dtmfSideTone">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfSpeed" title="Duration of each DTMF digit when sending. Slower speeds are more reliable but take longer."><span class="setting-index">34</span> DTMF Speed</label>
                        <select id="dtmfSpeed">
                            <option value="0">80ms</option>
                            <option value="1">90ms</option>
                            <option value="2">100ms</option>
                            <option value="3">110ms</option>
                            <option value="4">120ms</option>
                            <option value="5">130ms</option>
                            <option value="6">140ms</option>
                            <option value="7">150ms</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="dDcd" title="Enable DTMF signaling for single call, group call, and other DTMF calling features"><span class="setting-index">35</span> DCD</label>
                        <input type="checkbox" id="dDcd">
                    </div>
                    <div class="setting-row">
                        <label for="dHold" title="DTMF auto-reset time - how long before the DTMF decoder resets after receiving tones"><span class="setting-index">36</span> D-HOLD</label>
                        <select id="dHold">
                            <option value="0">OFF</option>
                            <option value="1">5S</option>
                            <option value="2">10S</option>
                            <option value="3">15S</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="dRsp" title="DTMF call response: NULL=silent, RING=play ring tone, REPLY=ring + 1s call-back, BOTH=ring + call-back"><span class="setting-index">37</span> D-RSP</label>
                        <select id="dRsp">
                            <option value="0">NULL</option>
                            <option value="1">RING</option>
                            <option value="2">REPLY</option>
                            <option value="3">BOTH</option>
                        </select>
                    </div>

                    <h4 style="margin-top: 20px; margin-bottom: 10px; color: #666;">PTT ID Sequences</h4>
                    <div class="setting-row">
                        <label for="dtmfBotCode" title="DTMF sequence transmitted at start of transmission (BOT) when PTT ID is enabled. Up to 15 digits: 0-9, A-D, *, #">Start Code (BOT)</label>
                        <input type="text" id="dtmfBotCode" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="*123#">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfEotCode" title="DTMF sequence transmitted at end of transmission (EOT) when PTT ID is enabled. Up to 15 digits: 0-9, A-D, *, #">End Code (EOT)</label>
                        <input type="text" id="dtmfEotCode" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="#123*">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>DTMF Group Calling</h3>
                    <div class="setting-row">
                        <label for="dtmfGroupCode" title="Select which group call code to activate, or special keys like *, #, A-D">Group Code Selector</label>
                        <select id="dtmfGroupCode">
                            <option value="0x00">Off</option>
                            <option value="0xFF">Disabled</option>
                            <option value="0x0E">*</option>
                            <option value="0x0F">#</option>
                            <option value="0x0A">A</option>
                            <option value="0x0B">B</option>
                            <option value="0x0C">C</option>
                            <option value="0x0D">D</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup1" title="Group 1 DTMF calling code. Up to 15 digits: 0-9, A-D, *, #">Group 1</label>
                        <input type="text" id="dtmfGroup1" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup2" title="Group 2 DTMF calling code">Group 2</label>
                        <input type="text" id="dtmfGroup2" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup3" title="Group 3 DTMF calling code">Group 3</label>
                        <input type="text" id="dtmfGroup3" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup4" title="Group 4 DTMF calling code">Group 4</label>
                        <input type="text" id="dtmfGroup4" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup5" title="Group 5 DTMF calling code">Group 5</label>
                        <input type="text" id="dtmfGroup5" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup6" title="Group 6 DTMF calling code">Group 6</label>
                        <input type="text" id="dtmfGroup6" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup7" title="Group 7 DTMF calling code">Group 7</label>
                        <input type="text" id="dtmfGroup7" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfGroup8" title="Group 8 DTMF calling code">Group 8</label>
                        <input type="text" id="dtmfGroup8" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>TX Band Limits</h3>
                    <div class="setting-row">
                        <p style="color: #888; font-size: 0.9em; margin: 0 0 10px 0;">
                            Limits vary by radio mode. NORMAL: VHF 136-174, UHF 200-600. HAM: VHF 144-148, UHF 420-450.
                        </p>
                    </div>
                    <div class="setting-row">
                        <label for="txVhfLow" title="VHF transmit band lower limit in MHz">VHF Low</label>
                        <input type="text" id="txVhfLow" class="text-input" placeholder="136.0">
                    </div>
                    <div class="setting-row">
                        <label for="txVhfHigh" title="VHF transmit band upper limit in MHz">VHF High</label>
                        <input type="text" id="txVhfHigh" class="text-input" placeholder="174.0">
                    </div>
                    <div class="setting-row">
                        <label for="txUhfLow" title="UHF transmit band lower limit in MHz">UHF Low</label>
                        <input type="text" id="txUhfLow" class="text-input" placeholder="400.0">
                    </div>
                    <div class="setting-row">
                        <label for="txUhfHigh" title="UHF transmit band upper limit in MHz">UHF High</label>
                        <input type="text" id="txUhfHigh" class="text-input" placeholder="520.0">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>LED</h3>
                    <div class="setting-row">
                        <label for="breathLed" title="LED breathing effect duration when radio is idle. Creates a pulsing glow. Uses extra battery."><span class="setting-index">32</span> Breath LED</label>
                        <select id="breathLed">
                            <option value="0">OFF</option>
                            <option value="1">5s</option>
                            <option value="2">10s</option>
                            <option value="3">15s</option>
                            <option value="4">30s</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="amBand" title="Enable AM band reception for commercial AM radio">AM Band</label>
                        <input type="checkbox" id="amBand">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Unknown Settings</h3>
                    <div class="setting-row">
                        <label for="onlyChMode" title="Windows CPS setting 'Only CH Mode'. Purpose unknown - testing shows VFO mode still works when enabled. May affect other radio behavior.">Only CH Mode</label>
                        <input type="checkbox" id="onlyChMode">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>FM Broadcast Radio</h3>
                    <div class="setting-row">
                        <label for="fmMode" title="FM radio mode: VFO for direct frequency entry, Channel for preset channels">FM Mode</label>
                        <select id="fmMode">
                            <option value="0">VFO</option>
                            <option value="1">Channel</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="fmVfoFreq" title="FM VFO frequency for direct tuning (88.0-108.0 MHz)">FM VFO Frequency (MHz)</label>
                        <input type="text" id="fmVfoFreq" class="text-input" placeholder="90.5">
                    </div>
                </div>

                <div class="settings-group security-group">
                    <h3 style="color: #ff4444;">⚠ Security Settings</h3>
                    <div class="setting-row">
                        <p style="color: #ff8888; font-size: 0.9em; margin: 0 0 10px 0;">
                            <strong>WARNING:</strong> STUN remotely disables TX/RX. KILL permanently disables the radio until revived. Use with caution!
                        </p>
                    </div>
                    <div class="setting-row">
                        <label for="stun" title="Enable remote STUN feature - allows disabling radio transmit/receive remotely via DTMF">STUN Enable</label>
                        <input type="checkbox" id="stun">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfStunCode" title="DTMF code to remotely disable this radio's transmit/receive. Up to 15 digits: 0-9, A-D, *, #">STUN Code</label>
                        <input type="text" id="dtmfStunCode" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                    <div class="setting-row">
                        <label for="kill" title="Enable remote KILL feature - permanently disables radio until revived via special DTMF code">KILL Enable</label>
                        <input type="checkbox" id="kill">
                    </div>
                    <div class="setting-row">
                        <label for="dtmfKillCode" title="DTMF code to permanently disable this radio until revived. Up to 15 digits. USE WITH CAUTION!">KILL Code</label>
                        <input type="text" id="dtmfKillCode" maxlength="15" class="text-input" pattern="[0-9A-D*#]{0,15}" placeholder="">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Power On Message</h3>
                    <div class="setting-row">
                        <label for="ponmgs" title="What to show on power-up: Voltage=battery voltage, Message=custom 3-line message, Picture=Tidradio logo"><span class="setting-index">14</span> PONMGS</label>
                        <select id="ponmgs">
                            <option value="0">Voltage</option>
                            <option value="1">Message</option>
                            <option value="2">Picture</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label for="msg1" title="First line of custom power-on message (up to 16 characters)">MSG1</label>
                        <input type="text" id="msg1" maxlength="16" class="text-input">
                    </div>
                    <div class="setting-row">
                        <label for="msg2" title="Second line of custom power-on message (up to 16 characters)">MSG2</label>
                        <input type="text" id="msg2" maxlength="16" class="text-input">
                    </div>
                    <div class="setting-row">
                        <label for="msg3" title="Third line of custom power-on message (up to 16 characters)">MSG3</label>
                        <input type="text" id="msg3" maxlength="16" class="text-input">
                    </div>
                </div>
            </div>
        </section>

        <section id="fmchannelsPanel" class="panel">
            <div class="grid-toolbar">
                <span class="grid-info">25 FM Channels (88.0-108.0 MHz) | Ctrl+1/2/3 switch tabs, Ctrl+4 enable debug</span>
            </div>
            <div class="fm-container disabled" id="fmContainer">
                <div class="panel-disabled-message" id="fmDisabledMessage">Read from radio or load a file to edit FM channels</div>
                <table class="channel-grid" id="fmGrid">
                    <thead>
                        <tr>
                            <th class="col-ch">CH</th>
                            <th class="col-fmfreq">Frequency (MHz)</th>
                        </tr>
                    </thead>
                    <tbody id="fmBody">
                    </tbody>
                </table>
            </div>
        </section>

        <section id="debugPanel" class="panel">
            <div class="debug-toolbar">
                <span class="debug-info">Memory Dump (16 KB) | <span class="legend-known">Known</span> <span class="legend-unknown">Unknown Data</span> <span class="legend-empty">Empty (0xFF)</span> | Ctrl+1/2/3 switch tabs</span>
            </div>
            <div class="debug-container disabled" id="debugContainer">
                <div class="panel-disabled-message" id="debugDisabledMessage">Read from radio or load a file to view memory</div>
                <div class="hexdump" id="hexdump">
                    <div class="hexdump-placeholder">Read from radio to view memory dump</div>
                </div>
            </div>
        </section>
    </main>

    <footer class="status-bar">
        <span id="statusMessage">Ready</span>
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </footer>

    <input type="file" id="fileInput" accept=".h3p" style="display: none;">

    <script src="js/storage.js"></script>
    <script src="js/ble.js"></script>
    <script src="js/grid.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/fm.js"></script>
    <script src="js/debug.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
